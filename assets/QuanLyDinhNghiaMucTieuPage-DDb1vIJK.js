import{r as g,j as e,h as T,B as j,b as S,R as w,c as G,d as L,f as M,A as U}from"./index-ZyA5Mrcr.js";import{a as E,h as k,Q as C,u as b,b as O,l as P,D as o,I as N,E as F,e as H,N as v,M as B,T as Q,S as R,U as q,d as I,c as z}from"./EditIcon-zZKgeQcI.js";import{C as _}from"./helper-C5cr0rGy.js";import{T as K,I as Y,A as V}from"./Table-Cc5NRMje.js";import{u as X,F as x,I as Z,l as $}from"./Input-BKVXcAzA.js";const y="/define-goald",W=t=>E({method:"GET",url:y,params:{...t,pageNo:t.pageNo-1}}),J=t=>E({method:"DELETE",url:y,params:{id:t}}),ee=k(C.QUAN_LY_DINH_NGHIA_MUC_TIEU,{getList:t=>[t]}),f=t=>b({queryKey:ee.getList(t).queryKey,queryFn:async()=>(await W(t)).data}),te=({onSuccess:t})=>O({mutationFn:async n=>{await J(n)},onSuccess:()=>{t()}}),ae={pageNo:o.PAGE_NO,pageSize:o.PAGE_SIZE,keyword:void 0,domain:void 0},D=()=>P({defaultState:ae}),ne=()=>{const[t,n]=g.useState({open:!1,onCancel:()=>n({...t,open:!1}),confirmTitle:"Bạn có chắc chắn muốn xoá định nghĩa mục tiêu"}),{urlState:a,setUrl:d}=D(),{data:u,isLoading:m,refetch:h}=f(a),{mutate:l}=te({onSuccess:()=>{v.success("Xoá định nghĩa mục tiêu thành công !"),n(i=>({...i,open:!1})),h()}}),r=g.useMemo(()=>[{title:"STT",ellipsis:!0,width:60,render:(i,c,p)=>e.jsx(e.Fragment,{children:a.pageSize*(a.pageNo-1)+p+1})},{title:"Mã định nghĩa",dataIndex:"",ellipsis:!0,width:170},{title:"Định nghĩa",dataIndex:"",ellipsis:!0,width:220},{title:"Phân loại",dataIndex:"",ellipsis:!0,width:110},{title:"Mô tả",dataIndex:"",ellipsis:!0,width:320},{title:"Văn bản quy định",dataIndex:"",ellipsis:!0,width:170},{title:"Người tạo",ellipsis:!0,width:165},{title:"Người cập nhật",ellipsis:!0,width:165},{title:"Thao tác",dataIndex:"",ellipsis:!0,width:140,render:(i,c)=>e.jsxs(e.Fragment,{children:[e.jsx(N,{icon:e.jsx(F,{}),tooltip:_.EDIT,className:"mr-4",onClick:()=>{}}),e.jsx(N,{icon:e.jsx(H,{}),tooltip:_.DELETE,onClick:()=>{n(p=>({...p,open:!0,message:`${c.code} - ${c.name}`,onOk:()=>{l(c.id)}}))}})]})}],[a.pageSize,a.pageNo,l]),A=i=>{d({...a,pageNo:i.current||o.PAGE_NO,pageSize:i.pageSize||o.PAGE_SIZE})};return e.jsxs(e.Fragment,{children:[e.jsx(K,{columns:r,dataSource:u?.data,loading:m,onChange:A,scroll:{x:1600,y:500},sticky:!0,rowKey:"id"}),e.jsx(Y.Delete,{...t})]})},s={keyword:{label:"Từ khoá",placeholder:"Nhập từ khoá để tìm kiếm",name:"keyword"},domain:{label:"Lĩnh vực",placeholder:"Chọn lĩnh vực",name:"domain"}},se=()=>{const t=T(),[n]=X(),{urlState:a,setUrl:d}=D(),{isLoading:u,refetch:m}=f(a),h=l=>{const r={...l,pageNo:o.PAGE_NO,pageSize:o.PAGE_SIZE};if($.isEqual(r,a)){m();return}d(r)};return e.jsx("div",{className:"mb-5",children:e.jsx(x,{layout:"vertical",form:n,onFinish:h,children:e.jsxs("div",{className:"flex gap-x-6 gap-y-4 items-end flex-wrap form-no-margin",children:[e.jsx(x.Item,{label:s.keyword?.label,name:s.keyword.name,className:"min-w-[270px] w-[18%]",children:e.jsx(Z,{formKey:s.keyword.name,placeholder:s.keyword?.placeholder,maxLength:B.ONE_THOUSAND})}),e.jsx(x.Item,{label:s.domain?.label,name:s.domain.name,className:"min-w-[270px] w-[18%]",children:e.jsx(Q,{placeholder:s.domain?.placeholder})}),e.jsx(j,{type:"primary",htmlType:"submit",icon:e.jsx(R,{}),loading:u,children:"Tìm kiếm"}),e.jsx(S,{type:"primary",icon:e.jsx(V,{}),onClick:()=>t(w.THEM_MOI_DINH_NGHIA_MUC_TIEU),children:"Thêm mới"}),e.jsx(G,{type:"primary",icon:e.jsx(q,{}),onClick:I,children:"Nhập file .xlsx"}),e.jsx(L,{type:"primary",icon:e.jsx(z,{}),onClick:I,children:"Xuất file .xlsx"})]})})})},de=()=>(M(U.QUAN_LY_DINH_NGHIA_MUC_TIEU,["QUAN_LY_DANH_GIA","QUAN_LY_DINH_NGHIA_MUC_TIEU"]),e.jsxs("div",{className:"rounded-2xl bg-white px-4 py-5",children:[e.jsx(se,{}),e.jsx(ne,{})]}));export{de as default};
